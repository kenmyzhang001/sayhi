# 短信模板生成系统需求文档

## 1. 系统概述
短信模板生成系统，支持多种生成方式和字符编码，用于批量生成短信内容。

## 2. 核心功能

### 2.1 模板配置
- **字符数量限制**：70字符/1条短信
- **内容位置选择**：支持多个括号位置 `()()()()`，可增可减
- **字符编码支持**：
  - ASCII
  - Zawgyi
  - Unicode
  - 其它

### 2.2 生成方式
- **顺序生成**：按照固定顺序依次生成所有组合
- **随机生成**：随机打乱位置顺序生成

### 2.3 位置定义
- 括号位置暂定为：**a**、**b**、**c**、**d** 四个位置
- 每个位置对应的具体值由后台配置管理

## 3. 模板语法说明

### 3.1 模板格式
模板使用括号 `()` 定义位置，括号内可以是：
- 固定值：如 `(1)`、`(baidu.com)`、`(2)`
- 范围值：如 `(3-10)` 表示从3到10，共8种话术（3, 4, 5, 6, 7, 8, 9, 10）

### 3.2 示例模板
```
(1)(baidu.com)(2)(3-10)
```
解析：
- 位置a：固定值 `1`
- 位置b：固定值 `baidu.com`
- 位置c：固定值 `2`
- 位置d：范围值 `3-10`（8种话术）

## 4. 生成结果示例

### 4.1 顺序生成
按照 a → b → c → d 的顺序生成：
```
a b c d
a b c d2
a b c d3
a b c d4
...
a b c d10
```

### 4.2 随机生成
随机打乱位置顺序生成：
```
C d3 b a
D2 b c a
B d a c
...
```

## 5. 功能要求

### 5.1 字符数限制与提示
- 实时计算生成内容的字符数
- 当字符数超过70字符时：
  - 显示超出提示
  - 允许编辑超出内容
  - 明确标识超出部分

### 5.2 后台管理
- **位置值配置**：支持后台输入和配置 a、b、c、d 各位置对应的具体值
- **配置查询**：支持查询和修改已配置的位置值
- **配置管理**：支持增删改查操作

## 6. 技术实现要点

### 6.1 模板解析
- 解析括号位置
- 识别固定值和范围值
- 计算总组合数

### 6.2 生成逻辑
- 顺序生成：按位置顺序遍历所有组合
- 随机生成：随机打乱位置顺序，确保不重复

### 6.3 字符编码处理
- 支持多种字符编码格式
- 正确计算不同编码下的字符数

### 6.4 字符数统计
- 实时统计当前生成内容的字符数
- 支持不同编码格式的字符数计算

## 7. 界面要求

### 7.1 模板编辑界面
- 模板输入框
- 字符编码选择
- 生成方式选择（顺序/随机）
- 实时字符数显示

### 7.2 生成结果界面
- 生成结果列表
- 字符数显示
- 超出提示标识
- 编辑功能

### 7.3 后台配置界面
- 位置值配置表单（a、b、c、d）
- 配置列表查询
- 增删改查操作

## 8. 数据模型

### 8.1 模板配置
```json
{
  "template": "(1)(baidu.com)(2)(3-10)",
  "encoding": "Unicode",
  "generateMode": "sequential|random",
  "positions": {
    "a": ["1"],
    "b": ["baidu.com"],
    "c": ["2"],
    "d": ["3", "4", "5", "6", "7", "8", "9", "10"]
  }
}
```

### 8.2 生成结果
```json
{
  "content": "1 baidu.com 2 3",
  "charCount": 15,
  "isExceeded": false,
  "exceededChars": 0
}
```

## 9. 边界情况处理

1. **空模板**：提示用户输入模板
2. **无效范围**：如 `(10-3)` 应提示错误
3. **字符数超限**：明确提示并允许编辑
4. **编码转换错误**：提示编码不兼容
5. **位置值缺失**：提示配置位置值

## 10. 扩展性考虑

- 支持更多位置（e、f、g...）
- 支持更复杂的范围表达式
- 支持条件生成规则
- 支持模板保存和复用

